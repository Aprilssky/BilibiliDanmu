# BilibiliDanmu
## 功能概述
这个Python脚本实现了以下功能：

实时抓取B站直播间的弹幕内容

将弹幕持久化存储到本地文件

提供简单的词频分析功能

新增功能：根据用户名搜索弹幕记录

## 安装与使用
### 依赖安装
bash
pip install requests
### 使用方法
修改脚本中的 room_id 为你想要监控的B站直播间ID

运行脚本：

bash
python danmu_analyzer.py
### 功能说明
- 弹幕抓取功能
实时获取直播间弹幕

自动记录发言时间、用户昵称和内容

网络异常自动重试机制

- 数据存储功能
所有弹幕自动保存到 danmu.log 文件

避免重复记录相同弹幕

追加写入模式，不会覆盖历史数据

- 词频分析功能
分析弹幕中的词频并生成词云图

- 用户搜索功能
新增 `search_user_from_log` 函数，可以根据用户名从 `danmu.log` 文件中搜索相关记录。

## 词云展示
以下是根据弹幕内容生成的词云图：

![弹幕词云图](wordcloud.png)

## 文件说明
### GenerateDanmu.py
该文件用于随机生成模拟弹幕内容，并将其保存到 `danmu.log` 文件中。主要功能包括：
- 随机选择预定义的弹幕词汇。
- 为每条弹幕生成唯一ID和时间戳。
- 将生成的弹幕信息格式化后追加写入到 `danmu.log` 文件中。

此文件主要用于测试和演示目的，模拟真实弹幕数据的生成过程。

### analyze_word_frequency.py
该文件用于分析存储在 `danmu.log` 中的弹幕内容，并生成词云图。主要功能包括：
- 读取 `danmu.log` 文件中的弹幕内容。
- 使用 `jieba` 对弹幕内容进行中文分词。
- 统计词频并过滤掉无意义的短词。
- 使用 `WordCloud` 库生成词云图，并将其保存为图片文件 `wordcloud.png`。
- 显示生成的词云图，并返回出现频率最高的词语列表。

此文件主要用于对弹幕内容进行可视化分析，帮助理解弹幕中的高频词汇。

### searchuser.py
该文件包含 `search_user_from_log` 函数，用于根据用户名从 `danmu.log` 文件中搜索相关记录。主要功能包括：
- 打开 `danmu.log` 文件并逐行读取内容。
- 检查每一行是否包含指定的用户名。
- 返回一个包含匹配记录的列表。

此文件主要用于根据用户名搜索弹幕记录，便于查找特定用户的发言历史。